### thread의 safety

#### 여러 thread가 공유하는 데이터에 접근할 때, 데이터의 일관성이 유지되는 것을 의미

- 데이터의 일관성을 유지하지 않으면, 프로그램의 동작이 예측할 수 없게 되고, 심지어 프로그램이 중단될 수도 있음.
- 데이터의 일관성을 유지하지 않으면, 프로그램이 보안 취약점을 가지게 될 수 있음.
- method 1: 공유 데이터를 잠그기(lock)
- method 2: 공유 데이터를 복사하기(copy)
- method 3: 공유 데이터를 동기화하기(synchronize)



### thread의 unsafety

####  여러 thread가 공유하는 데이터에 접근할 때, 데이터의 일관성이 유지되지 않는 것을 의미

- 두 개의 thread가 공유하는 데이터에 동시에 접근하는 경우
- 두 개의 thread가 공유하는 데이터를 변경하는 경우
- 두 개의 thread가 공유하는 데이터의 순서가 보장되지 않는 경우

**Python 웹 프로젝트에서 스레드 안전의 중요성:**

스레드 안전성은 여러 가지 이유로 Python 웹 프로젝트에서 가장 중요합니다.

1. **데이터 일관성:** 웹 애플리케이션에서 사용자는 데이터가 정확하고 일관성이 있기를 기대합니다. 예를 들어 사용자가 전자 상거래 웹사이트에서 결제하는 경우 계정 잔액이 올바르게 업데이트되기를 기대합니다. 스레드 안전성은 여러 동시 업데이트로 인해 데이터의 불일치나 오류가 발생하지 않도록 합니다.
2. **예측 가능한 동작:** 스레드 안전성은 스레드가 실행되는 순서에 관계없이 프로그램의 동작이 예측 가능한 상태로 유지되도록 보장합니다. 이러한 예측 가능성은 응용 프로그램의 기능과 사용자 경험의 무결성을 유지하는 데 매우 중요합니다.
3. **충돌 방지:** 스레드 안전이 없으면 충돌 및 데이터 손상이 발생할 수 있으며 잠재적으로 프로그램 충돌 또는 정지로 이어질 수 있습니다. 예를 들어 여러 스레드가 공유 파일에 로그를 쓰는 시나리오를 생각해 보십시오. 적절한 동기화가 없으면 파일이 손상되어 로깅 시스템이 쓸모 없게 될 수 있습니다.
4. **보안:** 데이터 일관성은 사용자 경험에 관한 것만이 아닙니다. 또한 보안에 영향을 미칩니다. 적절한 동기화 없이 스레드가 중요한 데이터에 액세스하고 수정할 수 있는 경우 보안 취약성이 발생할 수 있습니다. 예를 들어 사용자 인증 자격 증명이 공유 메모리에 저장된 경우 스레드 안전 문제로 인해 해당 자격 증명이 무단 액세스에 노출될 수 있습니다.

 **Python 웹 프로젝트 예:**

Python 웹 프로젝트의 맥락에서 스레드 안전하지 않음 및 스레드 안전성의 개념을 설명하겠습니다. 사용자가 설문 조사에서 선호하는 옵션에 투표할 수 있는 온라인 투표 응용 프로그램을 개발 중이라고 상상해 보십시오. 각 사용자 투표 요청은 요청을 처리하기 위해 웹 서버에서 새 스레드를 트리거합니다.

```python
total_votes_lock = threading.Lock()  # Lock to synchronize access to total_votes

def vote(option):
    global total_votes
    with total_votes_lock:
        # Ensuring exclusive access to total_votes
        # Simulating a delay in processing the vote
        time.sleep(random.randint(1, 3))
        total_votes += 1
        print(f"Vote for option {option} recorded. Total votes: {total_votes}")

# User requests to vote for option 1 and option 2 concurrently
thread1 = threading.Thread(target=vote, args=(1,))
thread2 = threading.Thread(target=vote, args=(2,))
thread1.start()
thread2.start()
```

이 시나리오에서 `threading.Lock()`을 사용하면 한 번에 하나의 스레드만 `total_votes`에 액세스하고 수정할 수 있습니다. 이 동기화는 경합 상태를 방지하고 정확한 총 투표 수를 보장합니다.

**결론:**

Python 웹 프로젝트의 맥락에서 스레드 안전성은 데이터 일관성, 예측 가능한 동작, 충돌 방지 및 보안 유지를 보장하는 데 가장 중요합니다. 잠금 및 세마포어와 같은 적절한 동기화 메커니즘을 사용함으로써 개발자는 스레드 불안전성의 위험을 완화하고 데이터 무결성 또는 사용자 경험을 손상시키지 않고 동시 사용자 요청을 처리할 수 있는 강력하고 안정적인 웹 응용 프로그램을 만들 수 있습니다.

